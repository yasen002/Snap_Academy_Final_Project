{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport { getAuth, onAuthStateChanged, User } from \"firebase/auth\";\nimport db from \"../../../firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\nvar auth = getAuth();\nexport function useAuthentication() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userData = _useState4[0],\n      setUserData = _useState4[1];\n\n  useEffect(function () {\n    var unsubscribeFromAuthStatusChanged = onAuthStateChanged(auth, function (user) {\n      if (user) {\n        setUser(user);\n        getDoc(doc(db, \"Users\", user.uid)).then(function (userData) {\n          setUserData(userData.data());\n        }).catch(function (error) {\n          console.log(\"Error getting document:\", error);\n        });\n      } else {\n        setUser(undefined);\n      }\n    });\n    return unsubscribeFromAuthStatusChanged;\n  }, []);\n  return {\n    user: user,\n    userData: userData\n  };\n}","map":{"version":3,"names":["React","useEffect","useState","getAuth","onAuthStateChanged","User","db","doc","getDoc","auth","useAuthentication","user","setUser","userData","setUserData","unsubscribeFromAuthStatusChanged","uid","then","data","catch","error","console","log","undefined"],"sources":["/Users/abuyasen/Desktop/sea/Snap_Academy_Final_Project/src/utils/hooks/useAuthentication.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { getAuth, onAuthStateChanged, User } from \"firebase/auth\";\nimport db from \"../../../firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\n\nconst auth = getAuth();\n\nexport function useAuthentication() {\n  const [user, setUser] = useState();\n  const [userData, setUserData] = useState();\n\n  useEffect(() => {\n    const unsubscribeFromAuthStatusChanged = onAuthStateChanged(\n      auth,\n      (user) => {\n        if (user) {\n          // User is signed in, see docs for a list of available properties\n          // https://firebase.google.com/docs/reference/js/firebase.User\n          setUser(user);\n\n          // get Doc from User collection\n          getDoc(doc(db, \"Users\", user.uid))\n            .then((userData) => {\n              // console.log(\"User Doc\", userData.data());\n              setUserData(userData.data());\n            })\n            .catch((error) => {\n              console.log(\"Error getting document:\", error);\n            });\n        } else {\n          // User is signed out\n          setUser(undefined);\n        }\n      }\n    );\n\n    return unsubscribeFromAuthStatusChanged;\n  }, []);\n\n  return {\n    user,\n    userData,\n  };\n}"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,EAAkBC,kBAAlB,EAAsCC,IAAtC,QAAkD,eAAlD;AACA,OAAOC,EAAP;AACA,SAASC,GAAT,EAAcC,MAAd,QAA4B,oBAA5B;AAEA,IAAMC,IAAI,GAAGN,OAAO,EAApB;AAEA,OAAO,SAASO,iBAAT,GAA6B;EAClC,gBAAwBR,QAAQ,EAAhC;EAAA;EAAA,IAAOS,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAAgCV,QAAQ,EAAxC;EAAA;EAAA,IAAOW,QAAP;EAAA,IAAiBC,WAAjB;;EAEAb,SAAS,CAAC,YAAM;IACd,IAAMc,gCAAgC,GAAGX,kBAAkB,CACzDK,IADyD,EAEzD,UAACE,IAAD,EAAU;MACR,IAAIA,IAAJ,EAAU;QAGRC,OAAO,CAACD,IAAD,CAAP;QAGAH,MAAM,CAACD,GAAG,CAACD,EAAD,EAAK,OAAL,EAAcK,IAAI,CAACK,GAAnB,CAAJ,CAAN,CACGC,IADH,CACQ,UAACJ,QAAD,EAAc;UAElBC,WAAW,CAACD,QAAQ,CAACK,IAAT,EAAD,CAAX;QACD,CAJH,EAKGC,KALH,CAKS,UAACC,KAAD,EAAW;UAChBC,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCF,KAAvC;QACD,CAPH;MAQD,CAdD,MAcO;QAELR,OAAO,CAACW,SAAD,CAAP;MACD;IACF,CArBwD,CAA3D;IAwBA,OAAOR,gCAAP;EACD,CA1BQ,EA0BN,EA1BM,CAAT;EA4BA,OAAO;IACLJ,IAAI,EAAJA,IADK;IAELE,QAAQ,EAARA;EAFK,CAAP;AAID"},"metadata":{},"sourceType":"module"}