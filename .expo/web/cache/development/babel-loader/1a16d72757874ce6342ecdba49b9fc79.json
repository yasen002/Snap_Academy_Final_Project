{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { Camera, CameraType } from \"expo-camera\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { shareAsync } from 'expo-sharing';\nimport * as ImagePicker from 'expo-image-picker';\nimport CameraActions from \"../components/CameraActions\";\nimport CameraOptions from \"../components/CameraOptions\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function CameraScreen(_ref) {\n  var navigation = _ref.navigation,\n      focused = _ref.focused;\n  var cameraRef = useRef();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasCameraPermission = _useState2[0],\n      setHasCameraPermission = _useState2[1];\n\n  var _useState3 = useState(CameraType.back),\n      _useState4 = _slicedToArray(_useState3, 2),\n      type = _useState4[0],\n      setType = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      hasMediaLibraryPermission = _useState6[0],\n      setHasMediaLibraryPermission = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      photo = _useState8[0],\n      setPhoto = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      image = _useState10[0],\n      setImage = _useState10[1];\n\n  useEffect(function () {\n    (function _callee() {\n      var cameraPermission, mediaLibraryPermission;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync());\n\n            case 2:\n              cameraPermission = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(MediaLibrary.requestPermissionsAsync());\n\n            case 5:\n              mediaLibraryPermission = _context.sent;\n              setHasCameraPermission(cameraPermission.status === \"granted\");\n              setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return _jsx(Text, {\n      children: \"Requesting permissions...\"\n    });\n  } else if (!hasCameraPermission) {\n    return _jsx(Text, {\n      children: \"Permission for camera not granted. Please change this in settings.\"\n    });\n  }\n\n  function flipCamera() {\n    setType(type === CameraType.back ? CameraType.front : CameraType.back);\n  }\n\n  function switchFlash() {\n    setType(type === FlashMode.off ? FlashMode.on : FlashMode.off);\n  }\n\n  function checkGallery() {\n    var permissionResult, pickerResult;\n    return _regeneratorRuntime.async(function checkGallery$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.requestMediaLibraryPermissionsAsync());\n\n          case 2:\n            permissionResult = _context2.sent;\n\n            if (!(permissionResult.granted === false)) {\n              _context2.next = 6;\n              break;\n            }\n\n            alert(\"Permission to access camera roll is required!\");\n            return _context2.abrupt(\"return\");\n\n          case 6:\n            _context2.next = 8;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync());\n\n          case 8:\n            pickerResult = _context2.sent;\n            console.log(pickerResult);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function takePhoto() {\n    var options, newPhoto;\n    return _regeneratorRuntime.async(function takePhoto$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            console.log(\"Just took photo!\");\n            options = {\n              quality: 1,\n              base64: true,\n              exif: false\n            };\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(cameraRef.current.takePictureAsync(options));\n\n          case 4:\n            newPhoto = _context3.sent;\n            setPhoto(newPhoto);\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function savePhoto() {\n    MediaLibrary.saveToLibraryAsync(photo.uri).then(function () {\n      setPhoto(undefined);\n    });\n  }\n\n  ;\n\n  if (photo) {\n    var sharePic = function sharePic() {\n      shareAsync(photo.uri).then(function () {\n        setPhoto(undefined);\n      });\n    };\n\n    return _jsxs(_Fragment, {\n      children: [_jsx(Image, {\n        style: styles.preview,\n        source: {\n          uri: \"data:image/jpg;base64,\" + photo.base64\n        }\n      }), hasMediaLibraryPermission ? _jsx(Button, {\n        title: \"Save\",\n        onPress: savePhoto\n      }) : undefined, _jsx(Button, {\n        title: \"Discard\",\n        onPress: function onPress() {\n          return setPhoto(undefined);\n        }\n      })]\n    });\n  }\n\n  return _jsxs(_Fragment, {\n    children: [_jsx(Camera, {\n      style: styles.camera,\n      type: type,\n      ref: cameraRef\n    }), _jsx(CameraOptions, {\n      flipCamera: flipCamera\n    }), _jsx(CameraActions, {\n      checkGallery: checkGallery,\n      takePhoto: takePhoto\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  camera: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  preview: {\n    height: \"80%\",\n    width: \"100%\"\n  }\n});","map":{"version":3,"names":["useEffect","useRef","useState","Camera","CameraType","MediaLibrary","shareAsync","ImagePicker","CameraActions","CameraOptions","CameraScreen","navigation","focused","cameraRef","hasCameraPermission","setHasCameraPermission","back","type","setType","hasMediaLibraryPermission","setHasMediaLibraryPermission","photo","setPhoto","image","setImage","requestCameraPermissionsAsync","cameraPermission","requestPermissionsAsync","mediaLibraryPermission","status","undefined","flipCamera","front","switchFlash","FlashMode","off","on","checkGallery","requestMediaLibraryPermissionsAsync","permissionResult","granted","alert","launchImageLibraryAsync","pickerResult","console","log","takePhoto","options","quality","base64","exif","current","takePictureAsync","newPhoto","savePhoto","saveToLibraryAsync","uri","then","sharePic","styles","preview","camera","StyleSheet","create","flex","alignItems","justifyContent","height","width"],"sources":["/Users/abuyasen/Desktop/sea/Snap_Academy_Final_Project/src/screens/CameraScreen.js"],"sourcesContent":["import {\n  StyleSheet,\n  Text,\n  View,\n  SafeAreaView,\n  Button,\n  Image,\n} from \"react-native\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { Camera, CameraType } from \"expo-camera\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport { shareAsync } from 'expo-sharing';\nimport * as ImagePicker from 'expo-image-picker';\n\nimport CameraActions from \"../components/CameraActions\";\nimport CameraOptions from \"../components/CameraOptions\";\n\nexport default function CameraScreen({ navigation, focused }) {\n  let cameraRef = useRef();\n  const [hasCameraPermission, setHasCameraPermission] = useState();\n  const [type, setType] = useState(CameraType.back);\n  const [hasMediaLibraryPermission, setHasMediaLibraryPermission] = useState();\n  const [photo, setPhoto] = useState();\n\n  const [image, setImage] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      const cameraPermission = await Camera.requestCameraPermissionsAsync();\n      const mediaLibraryPermission =\n        await MediaLibrary.requestPermissionsAsync();\n      setHasCameraPermission(cameraPermission.status === \"granted\");\n      setHasMediaLibraryPermission(mediaLibraryPermission.status === \"granted\");\n    })();\n  }, []);\n\n  if (hasCameraPermission === undefined) {\n    return <Text>Requesting permissions...</Text>\n  } else if (!hasCameraPermission) {\n    return <Text>Permission for camera not granted. Please change this in settings.</Text>\n  }\n\n  function flipCamera() {\n    setType(type === CameraType.back ? CameraType.front : CameraType.back);\n  }\n\n  function switchFlash() {\n    setType(type === FlashMode.off ? FlashMode.on : FlashMode.off);\n  }\n\n  async function checkGallery() {\n    let permissionResult =\n      await ImagePicker.requestMediaLibraryPermissionsAsync();\n\n    if (permissionResult.granted === false) {\n      alert(\"Permission to access camera roll is required!\");\n      return;\n    }\n\n    let pickerResult = await ImagePicker.launchImageLibraryAsync();\n    console.log(pickerResult);\n  }\n\n  async function takePhoto() {\n    console.log(\"Just took photo!\");\n    let options = {\n      quality: 1,\n      base64: true,\n      exif: false,\n    };\n\n    let newPhoto = await cameraRef.current.takePictureAsync(options);\n    setPhoto(newPhoto);\n  }\n\n  function savePhoto() {\n    MediaLibrary.saveToLibraryAsync(photo.uri).then(() => {\n      setPhoto(undefined);\n    });\n  };\n\n\n  if (photo) {\n    let sharePic = () => {\n      shareAsync(photo.uri).then(() => {\n        setPhoto(undefined);\n      });\n    };\n\n    return (\n      <>\n        <Image\n          style={styles.preview}\n          source={{ uri: \"data:image/jpg;base64,\" + photo.base64 }}\n        />\n        {hasMediaLibraryPermission ? (\n          <Button title=\"Save\" onPress={savePhoto} />\n        ) : undefined}\n        <Button title=\"Discard\" onPress={() => setPhoto(undefined)} />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Camera style={styles.camera} type={type} ref={cameraRef} />\n      <CameraOptions flipCamera={flipCamera} />\n      <CameraActions checkGallery={checkGallery} takePhoto={takePhoto} />\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  camera: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  preview: {\n    height: \"80%\",\n    width: \"100%\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}